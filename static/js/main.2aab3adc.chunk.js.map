{"version":3,"sources":["components/Header/UserInfo/index.js","context.js","components/Header/Theme/index.js","components/Header/index.js","icons/index.js","components/Icon/index.js","components/Dialog/Item/index.js","components/Dialog/Title/index.js","components/Dialog/reducer.js","data.js","components/Dialog/index.js","components/Dialog/helpers.js","components/Sender/index.js","App.js","helpers/theme.js","index.js"],"names":["UserInfo","className","AppContext","createContext","Theme","useContext","theme","toggleTheme","data-theme","onClick","event","currentTarget","dataset","size","Header","MessageReaded","MessageSended","Icon","name","Array","width","height","icons","icon","viewBox","classNames","dangerouslySetInnerHTML","__html","Item","isReverse","isRemovable","messages","avatar","onRemove","onRemoveHandle","id","reverse","removable","src","alt","map","item","text","dayjs","date","format","status","data-id","extend","Calendar","Title","calendar","sameDay","lastWeek","sameElse","reducer","state","action","type","filter","message","payload","concat","Error","dialog","is","Dialog","newMessage","dialogRef","useRef","useReducer","data","dispatch","useEffect","setTimeout","current","scrollTop","scrollHeight","length","normalizedDialog","newDialog","forEach","i","diff","push","position","normalizeDialog","ref","key","Sender","onAddMessage","useState","value","setValue","onSubmit","preventDefault","Date","now","toISOString","placeholder","onChange","target","required","App","addMessage","localStorage","getItem","setItem","document","body","classList","add","remove","setTheme","Provider","WebFontLoader","load","google","families","locale","ReactDOM","render","getElementById"],"mappings":"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","file":"static/js/main.2aab3adc.chunk.js","sourcesContent":["import React from 'react'\r\nimport './styles.css'\r\n\r\nconst UserInfo = () => (\r\n    <div className='user-info'>\r\n        <div className='name'>KiryaFT dev</div>\r\n        <div className='status'>\r\n            <span className='circle' /> В сети\r\n        </div>\r\n    </div>\r\n)\r\n\r\nexport default UserInfo\r\n","import { createContext } from 'react'\r\n\r\nexport const AppContext = createContext()\r\n","import React, { useContext } from 'react'\r\nimport { AppContext } from '../../../context'\r\nimport { IoIosMoon, IoIosSunny } from 'react-icons/io'\r\nimport './styles.css'\r\n\r\nconst Theme = () => {\r\n    const { theme, toggleTheme } = useContext(AppContext)\r\n\r\n    const onToggleTheme = (event) => {\r\n        const { theme } = event.currentTarget.dataset\r\n        toggleTheme(theme)\r\n    }\r\n\r\n    return (\r\n        <div\r\n            className='theme'\r\n            data-theme={theme === 'light' ? 'dark' : 'light'}\r\n            onClick={onToggleTheme}\r\n        >\r\n            {theme === 'light' ? (\r\n                <IoIosMoon size={20} className='dark' />\r\n            ) : (\r\n                <IoIosSunny className='yellow' size={20} />\r\n            )}\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default Theme","import React from 'react'\r\nimport UserInfo from './UserInfo'\r\nimport Theme from './Theme'\r\n\r\nimport './styles.css'\r\n\r\nconst Header = () => {\r\n    return (\r\n        <div className='header'>\r\n            <UserInfo />\r\n            <Theme />\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default Header","export const MessageReaded = [\r\n    `<path \r\n\t\td=\"M773.495 279.073l-61.528-61.528-276.876 276.876 61.528 61.528 276.876-276.876zM958.077 217.545l-461.46 465.855-184.584-184.584-61.528 61.528 246.112 246.112 527.383-527.383-65.923-61.528zM0 560.344l246.112 246.112 61.528-61.528-246.112-246.112-61.528 61.528z\"\r\n\t/>`,\r\n    \"0 0 1024 1024\",\r\n]\r\n\r\nexport const MessageSended = [\r\n    `<path \r\n\t\td=\"M958.077 217.545l-461.46 465.855-184.584-184.584-61.528 61.528 246.112 246.112 527.383-527.383-65.923-61.528zM0 560.344v0z\"\r\n\t/>`,\r\n    \"0 0 1024 1024\",\r\n]","import React from \"react\"\r\nimport classNames from \"classnames\"\r\nimport PropTypes from \"prop-types\"\r\nimport * as icons from \"../../icons\"\r\n\r\nconst Icon = ({ size = 20, name, className = \"\" }) => {\r\n    const [width, height] = size instanceof Array ? size : [size, size]\r\n    const [icon, viewBox] = icons[name]\r\n\r\n    return (\r\n        <svg\r\n            className={classNames(\"icon\", className)}\r\n            width={width}\r\n            height={height}\r\n            dangerouslySetInnerHTML={{ __html: icon }}\r\n            viewBox={viewBox}\r\n        />\r\n    )\r\n}\r\n\r\nIcon.propTypes = {\r\n    size: PropTypes.number,\r\n    name: PropTypes.string.isRequired,\r\n    className: PropTypes.string,\r\n}\r\n\r\nexport default Icon","import React from 'react'\r\nimport PropTypes from 'prop-types'\r\nimport classNames from 'classnames'\r\nimport dayjs from 'dayjs'\r\nimport { IoIosTrash } from 'react-icons/io'\r\nimport Icon from '../../Icon'\r\nimport './styles.css'\r\n\r\nconst Item = ({ isReverse, isRemovable, messages, avatar, onRemove }) => {\r\n    const onRemoveHandle = (event) => {\r\n        const { id } = event.currentTarget.dataset\r\n        onRemove(+id)\r\n    }\r\n\r\n    return (\r\n        <div\r\n            className={classNames('item', {\r\n                reverse: isReverse,\r\n                removable: isRemovable,\r\n            })}\r\n        >\r\n            <img src={avatar} className='avatar' alt='Avatar' />\r\n            <div className='list'>\r\n                {messages.map((item) => (\r\n                    <div className='list-item' key={item.id}>\r\n                        <div className='text'>{item.text}</div>\r\n                        <div className='time'>{dayjs(item.date).format('HH:mm')}</div>\r\n                        <Icon\r\n                            size={15}\r\n                            className='message-status'\r\n                            name={\r\n                                item.status === 'sended' ? 'MessageSended' : 'MessageReaded'\r\n                            }\r\n                        />\r\n                        <IoIosTrash\r\n                            data-id={item.id}\r\n                            size={18}\r\n                            className='remove-message'\r\n                            onClick={onRemoveHandle}\r\n                        />\r\n                    </div>\r\n                ))}\r\n            </div>\r\n        </div>\r\n    )\r\n}\r\n\r\nItem.propTypes = {\r\n    isReverse: PropTypes.bool.isRequired,\r\n    isRemovable: PropTypes.bool.isRequired,\r\n    avatar: PropTypes.string.isRequired,\r\n    messages: PropTypes.arrayOf(\r\n        PropTypes.shape({\r\n            id: PropTypes.number.isRequired,\r\n            text: PropTypes.string.isRequired,\r\n            date: PropTypes.string.isRequired,\r\n            status: PropTypes.oneOf(['sended', 'readed']),\r\n        })\r\n    ).isRequired,\r\n    onRemove: PropTypes.func.isRequired\r\n}\r\n\r\nexport default Item","import React from 'react'\r\nimport PropTypes from 'prop-types'\r\nimport dayjs from 'dayjs'\r\nimport Calendar from 'dayjs/plugin/calendar'\r\nimport './styles.css'\r\n\r\ndayjs.extend(Calendar)\r\n\r\nconst Title = ({ date }) => (\r\n    <div className='title'>\r\n        {dayjs(date).calendar(null, {\r\n            sameDay: '[Сегодня]',\r\n            lastWeek: 'DD MMMM',\r\n            sameElse: 'DD MMMM YYYY'\r\n        })}\r\n    </div>\r\n)\r\n\r\nTitle.propTypes = {\r\n    date: PropTypes.string.isRequired\r\n}\r\n\r\nexport default Title","export default function reducer(state, action) {\r\n    switch (action.type) {\r\n        case 'remove-message':\r\n            return {\r\n                ...state,\r\n                messages: state.messages.filter(\r\n                    (message) => message.id !== action.payload\r\n                )\r\n            }\r\n\r\n        case 'add-message':\r\n            return {\r\n                ...state,\r\n                messages: state.messages.concat(action.payload)\r\n            }\r\n\r\n        case 'update-status':\r\n            return {\r\n                ...state,\r\n                messages: state.messages.map((message) => {\r\n                    if (message.id === action.payload.id) {\r\n                        return {\r\n                            ...message,\r\n                            status: action.payload.status\r\n                        }\r\n                    }\r\n\r\n                    return message\r\n                })\r\n            }\r\n\r\n        default:\r\n            throw new Error('Unknown action type')\r\n    }\r\n}","const dialog = [\r\n    {\r\n        avatar:\r\n            \"https://sun9-2.userapi.com/c638729/v638729951/1d0ea/f9V7aJyh6tw.jpg\",\r\n        message: \"Привет\",\r\n        id: 0,\r\n        date: \"2020-10-11T10:09:04.712Z\",\r\n        is: \"her\",\r\n    },\r\n    {\r\n        avatar:\r\n            \"https://sun9-2.userapi.com/c638729/v638729951/1d0ea/f9V7aJyh6tw.jpg\",\r\n        message: \"Как дела?\",\r\n        id: 1,\r\n        date: \"2020-10-11T10:19:04.712Z\",\r\n        is: \"her\",\r\n    },\r\n    {\r\n        avatar:\r\n            \"https://sun9-2.userapi.com/c638729/v638729951/1d0ea/f9V7aJyh6tw.jpg\",\r\n        message: \"Я только приехал с Марса\",\r\n        id: 2,\r\n        date: \"2020-10-11T10:24:04.712Z\",\r\n        is: \"her\",\r\n    },\r\n    {\r\n        avatar:\r\n            \"https://sun9-58.userapi.com/c836638/v836638514/867c/SPMigNB8gw0.jpg\",\r\n        message: \"Привет! Все хорошо, ты как?\",\r\n        id: 3,\r\n        date: \"2020-10-11T11:09:04.712Z\",\r\n        status: \"sended\",\r\n        is: \"my\",\r\n    },\r\n    {\r\n        avatar:\r\n            \"https://sun9-58.userapi.com/c836638/v836638514/867c/SPMigNB8gw0.jpg\",\r\n        message: \"Ааа, да, я слышал\",\r\n        id: 4,\r\n        date: \"2020-10-11T12:09:04.712Z\",\r\n        status: \"sended\",\r\n        is: \"my\",\r\n    },\r\n    {\r\n        avatar:\r\n            \"https://sun9-58.userapi.com/c836638/v836638514/867c/SPMigNB8gw0.jpg\",\r\n        message: \"Круто\",\r\n        id: 5,\r\n        date: \"2020-10-11T13:01:04.712Z\",\r\n        status: \"readed\",\r\n        is: \"my\",\r\n    },\r\n    {\r\n        avatar:\r\n            \"https://sun9-58.userapi.com/c836638/v836638514/867c/SPMigNB8gw0.jpg\",\r\n        message: \"Полет нормальный?\",\r\n        id: 6,\r\n        date: \"2020-10-11T14:09:07.712Z\",\r\n        status: \"readed\",\r\n        is: \"my\",\r\n    },\r\n    {\r\n        avatar:\r\n            \"https://sun9-2.userapi.com/c638729/v638729951/1d0ea/f9V7aJyh6tw.jpg\",\r\n        message: \"Да, все круто. Только никому не говори)\",\r\n        id: 7,\r\n        date: \"2020-10-11T15:09:04.712Z\",\r\n        is: \"her\",\r\n    },\r\n]\r\n\r\nexport default dialog","import React, { useReducer, useEffect, useRef } from 'react'\r\nimport PropTypes from 'prop-types'\r\n\r\nimport Item from './Item'\r\nimport Title from './Title'\r\n\r\nimport { normalizeDialog } from './helpers'\r\nimport reducer from './reducer'\r\nimport data from '../../data'\r\n\r\nimport './styles.css'\r\n\r\nconst Dialog = ({ newMessage }) => {\r\n    const dialogRef = useRef()\r\n    const [state, dispatch] = useReducer(reducer, {\r\n        messages: data\r\n    })\r\n\r\n    useEffect(() => {\r\n        if (newMessage) {\r\n            dispatch({\r\n                type: 'add-message',\r\n                payload: newMessage\r\n            })\r\n\r\n            setTimeout(() => {\r\n                dispatch({\r\n                    type: 'update-status',\r\n                    payload: {\r\n                        id: newMessage.id,\r\n                        status: 'readed'\r\n                    }\r\n                })\r\n            }, 1000)\r\n        }\r\n    }, [newMessage])\r\n\r\n    useEffect(() => {\r\n        dialogRef.current.scrollTop = dialogRef.current.scrollHeight\r\n    }, [state.messages.length])\r\n\r\n    const onRemove = (id) => {\r\n        dispatch({\r\n            type: 'remove-message',\r\n            payload: id\r\n        })\r\n    }\r\n\r\n    const normalizedDialog = normalizeDialog(state.messages)\r\n\r\n    return (\r\n        <div className='dialog'>\r\n            <div className='overflow' ref={dialogRef}>\r\n                {normalizedDialog.map((item) =>\r\n                    item.type === 'message' ? (\r\n                        <Item {...item} key={item.id} onRemove={onRemove} />\r\n                    ) : (\r\n                        <Title key={item.id} date={item.date} />\r\n                    )\r\n                )}\r\n            </div>\r\n        </div>\r\n    )\r\n}\r\n\r\nDialog.propTypes = {\r\n    newMessage: PropTypes.shape({\r\n        id: PropTypes.number\r\n    })\r\n}\r\n\r\nexport default Dialog","import dayjs from 'dayjs'\r\n\r\nexport const normalizeDialog = (dialog) => {\r\n    const newDialog = []\r\n\r\n    dialog.forEach((item, i) => {\r\n        if (i === 0 || dialog[i - 1]) {\r\n            const first = dayjs((i === 0 ? item : dialog[i - 1]).date)\r\n            const diff = first.diff(item.date, 'day')\r\n\r\n            if (i === 0 || diff) {\r\n                newDialog.push({\r\n                    type: 'title',\r\n                    id: `item-title-${item.id}`,\r\n                    date: item.date\r\n                })\r\n            }\r\n        }\r\n\r\n        if (i === 0 || item.is !== dialog[i - 1].is) {\r\n            newDialog.push({\r\n                type: 'message',\r\n                id: `item-message-${item.id}`,\r\n                avatar: item.avatar,\r\n                isReverse: item.is === 'my',\r\n                isRemovable: item.is === 'my',\r\n                messages: [\r\n                    {\r\n                        text: item.message,\r\n                        status: item.status,\r\n                        id: item.id,\r\n                        date: item.date,\r\n                    }\r\n                ]\r\n            })\r\n        } else {\r\n            const position = newDialog.length - 1\r\n\r\n            newDialog[position] = {\r\n                ...newDialog[position],\r\n                messages: newDialog[position].messages.concat({\r\n                    text: item.message,\r\n                    status: item.status,\r\n                    id: item.id,\r\n                    date: item.date,\r\n                })\r\n            }\r\n        }\r\n    })\r\n\r\n    return newDialog\r\n}","import React, { useState } from 'react'\r\nimport PropTypes from 'prop-types'\r\nimport './styles.css'\r\n\r\nconst Sender = ({onAddMessage}) => {\r\n    const [value, setValue] = useState('')\r\n\r\n    const onChange = (event) => setValue(event.target.value)\r\n    const onSubmit = (event) => {\r\n        event.preventDefault()\r\n\r\n        onAddMessage({\r\n            id: Date.now(),\r\n            avatar:\r\n                \"https://sun9-58.userapi.com/c836638/v836638514/867c/SPMigNB8gw0.jpg\",\r\n            message: value,\r\n            date: new Date().toISOString(),\r\n            is: 'my',\r\n            status: 'sended'\r\n        })\r\n        setValue('')\r\n    }\r\n\r\n    return (\r\n        <form className='sender' onSubmit={onSubmit}>\r\n            <input\r\n                placeholder='Введите сообщение'\r\n                value={value}\r\n                onChange={onChange}\r\n                required\r\n            />\r\n            <button>Отправить</button>\r\n        </form>\r\n    )\r\n}\r\n\r\nSender.propTypes = {\r\n    onAddMessage: PropTypes.func.isRequired\r\n}\r\n\r\nexport default Sender","import React, { useEffect, useState } from 'react'\n\nimport Header from './components/Header'\nimport Dialog from './components/Dialog'\nimport Sender from './components/Sender'\n\nimport { AppContext } from './context'\nimport { getTheme, setTheme } from './helpers/theme'\n\nconst App = () => {\n    const [message, addMessage] = useState(null)\n    const [theme, toggleTheme] = useState(getTheme())\n\n    useEffect(() => {\n        setTheme(theme)\n    }, [theme])\n\n    return (\n        <AppContext.Provider\n            value={{\n                theme,\n                toggleTheme\n            }}\n        >\n            <div className='container'>\n                <Header />\n                <Dialog newMessage={message} />\n                <Sender onAddMessage={addMessage} />\n            </div>\n        </AppContext.Provider>\n    )\n}\n\nexport default App\n","export const getTheme = () => {\r\n    return localStorage.getItem('application-theme') || 'dark'\r\n}\r\n\r\nexport const setTheme = (theme) => {\r\n    localStorage.setItem('application-theme', theme)\r\n\r\n    if (theme === 'dark') {\r\n        document.body.classList.add('dark')\r\n        document.body.classList.remove('light')\r\n    } else {\r\n        document.body.classList.add('light')\r\n        document.body.classList.remove('dark')\r\n    }\r\n}","import React, {StrictMode} from 'react'\nimport ReactDOM from 'react-dom'\nimport WebFontLoader from 'webfontloader'\nimport dayjs from 'dayjs'\n\nimport App from './App'\n\nimport 'dayjs/locale/ru'\nimport './css/index.css'\n\nWebFontLoader.load({\n    google: {\n        families: ['Open Sans:300,400,700'],\n    },\n})\n\ndayjs.locale('ru')\n\nReactDOM.render(\n    <StrictMode>\n        <App />\n    </StrictMode>,\n    document.getElementById('root')\n)"],"sourceRoot":""}