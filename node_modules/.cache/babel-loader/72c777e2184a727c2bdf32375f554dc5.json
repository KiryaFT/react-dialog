{"ast":null,"code":"import{jsx as _jsx}from\"react/jsx-runtime\";import _objectSpread from\"C:/Users/\\u041F\\u043E\\u043B\\u044C\\u0437\\u043E\\u0432\\u0430\\u0442\\u0435\\u043B\\u044C/react-dialog-example/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import{createElement as _createElement}from\"react\";import _slicedToArray from\"C:/Users/\\u041F\\u043E\\u043B\\u044C\\u0437\\u043E\\u0432\\u0430\\u0442\\u0435\\u043B\\u044C/react-dialog-example/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useReducer,useEffect,useRef}from'react';import Item from'./Item';import Title from'./Title';import{normalizeDialog}from'./helpers';import reducer from'./reducer';import data from'../../data';import'./styles.css';var Dialog=function Dialog(_ref){var newMessage=_ref.newMessage;var dialogRef=useRef();var _useReducer=useReducer(reducer,{messages:data}),_useReducer2=_slicedToArray(_useReducer,2),state=_useReducer2[0],dispatch=_useReducer2[1];useEffect(function(){if(newMessage){dispatch({type:'add-message',payload:newMessage});setTimeout(function(){dispatch({type:'update-status',payload:{id:newMessage.id,status:'readed'}});},1000);}},[newMessage]);useEffect(function(){dialogRef.current.scrollTop=dialogRef.current.scrollHeight;},[state.messages.length]);var onRemove=function onRemove(id){dispatch({type:'remove-message',payload:id});};var normalizedDialog=normalizeDialog(state.messages);return/*#__PURE__*/_jsx(\"div\",{className:\"dialog\",children:/*#__PURE__*/_jsx(\"div\",{className:\"overflow\",ref:dialogRef,children:normalizedDialog.map(function(item){return item.type==='message'?/*#__PURE__*/_createElement(Item,_objectSpread(_objectSpread({},item),{},{key:item.id,onRemove:onRemove})):/*#__PURE__*/_jsx(Title,{date:item.date},item.id);})})});};export default Dialog;","map":{"version":3,"sources":["C:/Users/Пользователь/react-dialog-example/src/components/Dialog/index.js"],"names":["React","useReducer","useEffect","useRef","Item","Title","normalizeDialog","reducer","data","Dialog","newMessage","dialogRef","messages","state","dispatch","type","payload","setTimeout","id","status","current","scrollTop","scrollHeight","length","onRemove","normalizedDialog","map","item","date"],"mappings":"+cAAA,MAAOA,CAAAA,KAAP,EAAgBC,UAAhB,CAA4BC,SAA5B,CAAuCC,MAAvC,KAAqD,OAArD,CAGA,MAAOC,CAAAA,IAAP,KAAiB,QAAjB,CACA,MAAOC,CAAAA,KAAP,KAAkB,SAAlB,CAEA,OAASC,eAAT,KAAgC,WAAhC,CACA,MAAOC,CAAAA,OAAP,KAAoB,WAApB,CACA,MAAOC,CAAAA,IAAP,KAAiB,YAAjB,CAEA,MAAO,cAAP,CAEA,GAAMC,CAAAA,MAAM,CAAG,QAATA,CAAAA,MAAS,MAAoB,IAAjBC,CAAAA,UAAiB,MAAjBA,UAAiB,CAC/B,GAAMC,CAAAA,SAAS,CAAGR,MAAM,EAAxB,CAD+B,gBAELF,UAAU,CAACM,OAAD,CAAU,CAC1CK,QAAQ,CAAEJ,IADgC,CAAV,CAFL,4CAExBK,KAFwB,iBAEjBC,QAFiB,iBAM/BZ,SAAS,CAAC,UAAM,CACZ,GAAIQ,UAAJ,CAAgB,CACZI,QAAQ,CAAC,CACLC,IAAI,CAAE,aADD,CAELC,OAAO,CAAEN,UAFJ,CAAD,CAAR,CAKAO,UAAU,CAAC,UAAM,CACbH,QAAQ,CAAC,CACLC,IAAI,CAAE,eADD,CAELC,OAAO,CAAE,CACLE,EAAE,CAAER,UAAU,CAACQ,EADV,CAELC,MAAM,CAAE,QAFH,CAFJ,CAAD,CAAR,CAOH,CARS,CAQP,IARO,CAAV,CASH,CACJ,CAjBQ,CAiBN,CAACT,UAAD,CAjBM,CAAT,CAmBAR,SAAS,CAAC,UAAM,CACZS,SAAS,CAACS,OAAV,CAAkBC,SAAlB,CAA8BV,SAAS,CAACS,OAAV,CAAkBE,YAAhD,CACH,CAFQ,CAEN,CAACT,KAAK,CAACD,QAAN,CAAeW,MAAhB,CAFM,CAAT,CAIA,GAAMC,CAAAA,QAAQ,CAAG,QAAXA,CAAAA,QAAW,CAACN,EAAD,CAAQ,CACrBJ,QAAQ,CAAC,CACLC,IAAI,CAAE,gBADD,CAELC,OAAO,CAAEE,EAFJ,CAAD,CAAR,CAIH,CALD,CAOA,GAAMO,CAAAA,gBAAgB,CAAGnB,eAAe,CAACO,KAAK,CAACD,QAAP,CAAxC,CAEA,mBACI,YAAK,SAAS,CAAC,QAAf,uBACI,YAAK,SAAS,CAAC,UAAf,CAA0B,GAAG,CAAED,SAA/B,UACKc,gBAAgB,CAACC,GAAjB,CAAqB,SAACC,IAAD,QAClBA,CAAAA,IAAI,CAACZ,IAAL,GAAc,SAAd,cACI,eAAC,IAAD,gCAAUY,IAAV,MAAgB,GAAG,CAAEA,IAAI,CAACT,EAA1B,CAA8B,QAAQ,CAAEM,QAAxC,GADJ,cAGI,KAAC,KAAD,EAAqB,IAAI,CAAEG,IAAI,CAACC,IAAhC,EAAYD,IAAI,CAACT,EAAjB,CAJc,EAArB,CADL,EADJ,EADJ,CAaH,CAnDD,CA2DA,cAAeT,CAAAA,MAAf","sourcesContent":["import React, { useReducer, useEffect, useRef } from 'react'\r\nimport PropTypes from 'prop-types'\r\n\r\nimport Item from './Item'\r\nimport Title from './Title'\r\n\r\nimport { normalizeDialog } from './helpers'\r\nimport reducer from './reducer'\r\nimport data from '../../data'\r\n\r\nimport './styles.css'\r\n\r\nconst Dialog = ({ newMessage }) => {\r\n    const dialogRef = useRef()\r\n    const [state, dispatch] = useReducer(reducer, {\r\n        messages: data\r\n    })\r\n\r\n    useEffect(() => {\r\n        if (newMessage) {\r\n            dispatch({\r\n                type: 'add-message',\r\n                payload: newMessage\r\n            })\r\n\r\n            setTimeout(() => {\r\n                dispatch({\r\n                    type: 'update-status',\r\n                    payload: {\r\n                        id: newMessage.id,\r\n                        status: 'readed'\r\n                    }\r\n                })\r\n            }, 1000)\r\n        }\r\n    }, [newMessage])\r\n\r\n    useEffect(() => {\r\n        dialogRef.current.scrollTop = dialogRef.current.scrollHeight\r\n    }, [state.messages.length])\r\n\r\n    const onRemove = (id) => {\r\n        dispatch({\r\n            type: 'remove-message',\r\n            payload: id\r\n        })\r\n    }\r\n\r\n    const normalizedDialog = normalizeDialog(state.messages)\r\n\r\n    return (\r\n        <div className='dialog'>\r\n            <div className='overflow' ref={dialogRef}>\r\n                {normalizedDialog.map((item) =>\r\n                    item.type === 'message' ? (\r\n                        <Item {...item} key={item.id} onRemove={onRemove} />\r\n                    ) : (\r\n                        <Title key={item.id} date={item.date} />\r\n                    )\r\n                )}\r\n            </div>\r\n        </div>\r\n    )\r\n}\r\n\r\nDialog.propTypes = {\r\n    newMessage: PropTypes.shape({\r\n        id: PropTypes.number\r\n    })\r\n}\r\n\r\nexport default Dialog"]},"metadata":{},"sourceType":"module"}