{"ast":null,"code":"import _objectSpread from\"C:/Users/\\u041F\\u043E\\u043B\\u044C\\u0437\\u043E\\u0432\\u0430\\u0442\\u0435\\u043B\\u044C/react-dialog-example/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import dayjs from'dayjs';export var normalizeDialog=function normalizeDialog(dialog){var newDialog=[];dialog.forEach(function(item,i){if(i===0||dialog[i-1]){var first=dayjs((i===0?item:dialog[i-1]).date);var diff=first.diff(item.date,'day');if(i===0||diff){newDialog.push({type:'title',id:\"item-title-\".concat(item.id),date:item.date});}}if(i===0||item.is!==dialog[i-1].is){newDialog.push({type:'message',id:\"item-message-\".concat(item.id),avatar:item.avatar,isReverse:item.is==='my',isRemovable:item.is==='my',messages:[{text:item.message,status:item.status,id:item.id,date:item.date}]});}else{var position=newDialog.length-1;newDialog[position]=_objectSpread(_objectSpread({},newDialog[position]),{},{messages:newDialog[position].messages.concat({text:item.message,status:item.status,id:item.id,date:item.date})});}});return newDialog;};","map":{"version":3,"sources":["C:/Users/Пользователь/react-dialog-example/src/components/Dialog/helpers.js"],"names":["dayjs","normalizeDialog","dialog","newDialog","forEach","item","i","first","date","diff","push","type","id","is","avatar","isReverse","isRemovable","messages","text","message","status","position","length","concat"],"mappings":"wLAAA,MAAOA,CAAAA,KAAP,KAAkB,OAAlB,CAEA,MAAO,IAAMC,CAAAA,eAAe,CAAG,QAAlBA,CAAAA,eAAkB,CAACC,MAAD,CAAY,CACvC,GAAMC,CAAAA,SAAS,CAAG,EAAlB,CAEAD,MAAM,CAACE,OAAP,CAAe,SAACC,IAAD,CAAOC,CAAP,CAAa,CACxB,GAAIA,CAAC,GAAK,CAAN,EAAWJ,MAAM,CAACI,CAAC,CAAG,CAAL,CAArB,CAA8B,CAC1B,GAAMC,CAAAA,KAAK,CAAGP,KAAK,CAAC,CAACM,CAAC,GAAK,CAAN,CAAUD,IAAV,CAAiBH,MAAM,CAACI,CAAC,CAAG,CAAL,CAAxB,EAAiCE,IAAlC,CAAnB,CACA,GAAMC,CAAAA,IAAI,CAAGF,KAAK,CAACE,IAAN,CAAWJ,IAAI,CAACG,IAAhB,CAAsB,KAAtB,CAAb,CAEA,GAAIF,CAAC,GAAK,CAAN,EAAWG,IAAf,CAAqB,CACjBN,SAAS,CAACO,IAAV,CAAe,CACXC,IAAI,CAAE,OADK,CAEXC,EAAE,sBAAgBP,IAAI,CAACO,EAArB,CAFS,CAGXJ,IAAI,CAAEH,IAAI,CAACG,IAHA,CAAf,EAKH,CACJ,CAED,GAAIF,CAAC,GAAK,CAAN,EAAWD,IAAI,CAACQ,EAAL,GAAYX,MAAM,CAACI,CAAC,CAAG,CAAL,CAAN,CAAcO,EAAzC,CAA6C,CACzCV,SAAS,CAACO,IAAV,CAAe,CACXC,IAAI,CAAE,SADK,CAEXC,EAAE,wBAAkBP,IAAI,CAACO,EAAvB,CAFS,CAGXE,MAAM,CAAET,IAAI,CAACS,MAHF,CAIXC,SAAS,CAAEV,IAAI,CAACQ,EAAL,GAAY,IAJZ,CAKXG,WAAW,CAAEX,IAAI,CAACQ,EAAL,GAAY,IALd,CAMXI,QAAQ,CAAE,CACN,CACIC,IAAI,CAAEb,IAAI,CAACc,OADf,CAEIC,MAAM,CAAEf,IAAI,CAACe,MAFjB,CAGIR,EAAE,CAAEP,IAAI,CAACO,EAHb,CAIIJ,IAAI,CAAEH,IAAI,CAACG,IAJf,CADM,CANC,CAAf,EAeH,CAhBD,IAgBO,CACH,GAAMa,CAAAA,QAAQ,CAAGlB,SAAS,CAACmB,MAAV,CAAmB,CAApC,CAEAnB,SAAS,CAACkB,QAAD,CAAT,gCACOlB,SAAS,CAACkB,QAAD,CADhB,MAEIJ,QAAQ,CAAEd,SAAS,CAACkB,QAAD,CAAT,CAAoBJ,QAApB,CAA6BM,MAA7B,CAAoC,CAC1CL,IAAI,CAAEb,IAAI,CAACc,OAD+B,CAE1CC,MAAM,CAAEf,IAAI,CAACe,MAF6B,CAG1CR,EAAE,CAAEP,IAAI,CAACO,EAHiC,CAI1CJ,IAAI,CAAEH,IAAI,CAACG,IAJ+B,CAApC,CAFd,GASH,CACJ,CA3CD,EA6CA,MAAOL,CAAAA,SAAP,CACH,CAjDM","sourcesContent":["import dayjs from 'dayjs'\r\n\r\nexport const normalizeDialog = (dialog) => {\r\n    const newDialog = []\r\n\r\n    dialog.forEach((item, i) => {\r\n        if (i === 0 || dialog[i - 1]) {\r\n            const first = dayjs((i === 0 ? item : dialog[i - 1]).date)\r\n            const diff = first.diff(item.date, 'day')\r\n\r\n            if (i === 0 || diff) {\r\n                newDialog.push({\r\n                    type: 'title',\r\n                    id: `item-title-${item.id}`,\r\n                    date: item.date\r\n                })\r\n            }\r\n        }\r\n\r\n        if (i === 0 || item.is !== dialog[i - 1].is) {\r\n            newDialog.push({\r\n                type: 'message',\r\n                id: `item-message-${item.id}`,\r\n                avatar: item.avatar,\r\n                isReverse: item.is === 'my',\r\n                isRemovable: item.is === 'my',\r\n                messages: [\r\n                    {\r\n                        text: item.message,\r\n                        status: item.status,\r\n                        id: item.id,\r\n                        date: item.date,\r\n                    }\r\n                ]\r\n            })\r\n        } else {\r\n            const position = newDialog.length - 1\r\n\r\n            newDialog[position] = {\r\n                ...newDialog[position],\r\n                messages: newDialog[position].messages.concat({\r\n                    text: item.message,\r\n                    status: item.status,\r\n                    id: item.id,\r\n                    date: item.date,\r\n                })\r\n            }\r\n        }\r\n    })\r\n\r\n    return newDialog\r\n}"]},"metadata":{},"sourceType":"module"}